!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=2)}([function(e,t,r){"use strict";r.r(t),t.default=function(e,t,r){var o,n,a,i,u,s=function(){var c=new Date-0-i;c<t&&c>=0?o=setTimeout(s,t-c):(o=null,r||(u=e.apply(a,n),o||(a=n=null)))};return function(){a=this,n=arguments,i=new Date-0;var c=r&&!o;return o||(o=setTimeout(s,t)),c&&(u=e.apply(a,n),a=n=null),u}}},,function(e,t,r){"use strict";r.r(t);var o=r(0);class n{constructor(e){this._key=e||"storage",this._storage=this.decode(this.getStorage(this._key),{})}_pathToArray(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")}_objectDeepGet(e,t,r){return(t=this._pathToArray(t)).unshift(e),t.reduce((e,o,n)=>n!==t.length-1?e[o]||{}:void 0!==e[o]?e[o]:r)}_objectDeepSet(e,t,r){(t=this._pathToArray(t)).unshift(e),t.reduce((e,o,n)=>(n!==t.length-1?e[o]||(e[o]={}):e[o]=r,e[o]))}_deepCopy(e){if(void 0!==e)return JSON.parse(JSON.stringify(e))}encode(e){try{return JSON.stringify(e)}catch(e){throw new Error("编码失败")}}decode(e,t){try{return JSON.parse(e)}catch(e){return t}}getStorage(e){return"undefined"!=typeof window&&window.localStorage&&window.localStorage.getItem&&window.localStorage.getItem(e)}setStorage(e,t){return"undefined"!=typeof window&&window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem(e,t)}syncLocalStorageEnsure(){return this.setStorage(this._key,this.encode(this._storage))}getItem(e,t){this.syncLocalStorage();const r=this._objectDeepGet(this._storage,e,t);return this._deepCopy(r)}setItem(e,t,r){return this._objectDeepSet(this._storage,e,t),r&&r.ensure?this.syncLocalStorageEnsure():this.syncLocalStorage()}}n.prototype.syncLocalStorage=Object(o.default)(n.prototype.syncLocalStorageEnsure,200),t.default=n}]);
//# sourceMappingURL=Storage.js.map